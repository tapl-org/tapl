language pythonlike

def simple_id(a):
    return a

tapl_dev.print(simple_id(3))

def poly_id(A):
    def typed_id(a: A):
        return a
    return typed_id
# Since A is not used in term layer of ploy_id, I just passed a None as a dummy value. 
id_int = poly_id(<None:Int>)
id_str = poly_id(<None:Str>)

tapl_dev.print(id_int(3))
tapl_dev.print(tapl_dev.to_string(id_str))
tapl_dev.print(id_str('abc'))

# This is another way to write an auto-inferred identity function, but `simple_id` is more concise.
def auto_id(a):
    def typed_id(b: a):
        return b
    return typed_id(a)

tapl_dev.print(auto_id('hello'))

def Slot(T):
    class Slot_:
        class_name = ^'Slot({})'.format(T)

        def __init__(self, value: T):
            self._value = value

        def set(self, value: T):
            self._value = value

        def get(self):
            return self._value
        
        def __repr__(self):
            return 'Slot(' + str(self._value) + ')'

    return Slot_

slot = Slot(Int)(5)
tapl_dev.print(slot)
tapl_dev.print(slot.set)